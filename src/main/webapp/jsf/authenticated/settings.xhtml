<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:sec="https://joinfaces.org/security"
	
	template="/WEB-INF/jsf/base.xhtml"
	lang="cs">

	<ui:define name="title">Login</ui:define>
	
	<ui:define name="body">
		<div class="container">
			<div class="row">
				<div class="col-12 col-sm-12 col-md-6">
					<h1>Personal details</h1>
					<h:form id="changePersonalDetails">
						<div class="form-group row">
							<h:outputLabel for="username" styleClass="col-md-4 col-form-label">
								Email:
							</h:outputLabel>
							<div class="col-md-8">
								<h:inputText
										id="username"
										value="#{loggedUser.user.username}"
										styleClass="form-control"
										tabindex="1"
										readonly="true" />
							</div>
						</div>
						<div class="form-group row">
							<h:outputLabel for="firstName" styleClass="col-md-4 col-form-label">
								First name:
							</h:outputLabel>
							<div class="col-md-8">
								<h:inputText
										id="firstName"
										value="#{loggedUser.user.firstName}"
										styleClass="form-control"
										tabindex="1"
								>
								</h:inputText>
							</div>
						</div>
						<div class="form-group row">
							<h:outputLabel for="lastName" styleClass="col-md-4 col-form-label">
								Last name:
							</h:outputLabel>
							<div class="col-md-8">
								<h:inputText
										id="lastName"
										value="#{loggedUser.user.lastName}"
										styleClass="form-control"
										tabindex="1"
								>
								</h:inputText>
							</div>
						</div>
						<div class="form-group row">
							<h:outputLabel for="role" styleClass="col-4 col-form-label">
								Has ADMIN role:
							</h:outputLabel>
							<div class="col-8 justify-content-center align-self-center">
								<h:outputText
										id="role"
										value="#{loggedUser.user.admin ? 'Yes' : 'No'}"
										styleClass="justify-content-center align-self-center"
										style="margin: 0px"
								>
								</h:outputText>
							</div>
						</div>
						<div class="form-group row">
							<a href="#" class="btn btn-primary" onclick="saveUserInfo(); return false;">
								Save changes
							</a>
						</div>
					</h:form>
				</div>
				<div class="col-12 col-sm-12 col-md-6">
					<h1>Password change</h1>
					<h:form id="changePasswordForm">
						<div class="form-group row">
							<h:outputLabel for="oldPassword" styleClass="col-md-4 col-form-label">
								Old password:
							</h:outputLabel>
							<div class="col-md-8">
								<h:inputSecret
										id="oldPassword"
										value="#{changePasswordService.oldPassword}"
										styleClass="form-control"
										tabindex="1"
								/>
							</div>
						</div>
						<div class="form-group row">
							<h:outputLabel for="newPassword1" styleClass="col-md-4 col-form-label">
								New password:
							</h:outputLabel>
							<div class="col-md-8">
								<h:inputSecret
										id="newPassword1"
										value="#{changePasswordService.newPassword1}"
										styleClass="form-control"
										tabindex="1"
								>
									<f:validateLength minimum="5" />
								</h:inputSecret>
							</div>
						</div>
						<div class="form-group row">
							<h:outputLabel for="newPassword2" styleClass="col-md-4 col-form-label">
								Repeat password:
							</h:outputLabel>
							<div class="col-md-8">
								<h:inputSecret
										id="newPassword2"
										value="#{changePasswordService.newPassword2}"
										styleClass="form-control"
										tabindex="1"
								>
									<f:validateLength minimum="5" />
								</h:inputSecret>
							</div>
						</div>
						<div class="form-group row">
							<h:commandLink
									styleClass="btn btn-warning"
									action="#{changePasswordService.changePassword}"
									tabindex="1"
							>Change password</h:commandLink>
						</div>
					</h:form>
				</div>
			</div>
			<div class="row">
				<h:messages id="messagesPersonalDetails" errorClass="alert mb-4 alert-danger" infoClass="alert mb-4 alert-success" layout="table" />
			</div>
		</div>
	</ui:define>
	
</ui:composition>
